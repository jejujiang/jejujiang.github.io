---
layout: post
title: run sinatra.app with Nginx
description: Ipsum dolor sit amet
image: assets/images/sinatra.jpg
---

Use Xiaomi 4A to install Termux

Install the necessary software
```bash
pkg update
pkg install ruby nginx
gem install sinatra rackup puma
```

Create Sinatra applications
```
# app.rb
require 'sinatra'

get '/' do
  content_type :html
  <<~HTML
    <~DOCTYPE html>
    <html>
    <head>
      <title>Termux Home</title>
    </head>
    <body>
      <h1>Hello from Sinatra</h1>
      <p>Served via Nginx on Termux</p>
    </body>
    </html>
  HTML
end

set :bind, '0.0.0.0'
set :port, 9292
```

Configure Nginx reverse proxy
```
# vi $PREFIX/etc/nginx/nginx.conf
worker_processes auto;

events {
    worker_connections 1024;
}

http {
    server {
        listen 8080;
        server_name localhost;

        location / {
            proxy_pass http://localhost:9292;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
        }
    }
}
```

Start services
```bash
ruby app.rb
```

Access tests
```
http://localhost:8080    # Local termux test
http://your mobile phone IP:8080    # Other devices on the same network
```
